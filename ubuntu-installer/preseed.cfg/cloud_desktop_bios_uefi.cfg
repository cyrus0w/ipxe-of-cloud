##!!!本脚本适用于18.04和20.04，其余版本可能适用，未测试！！

##脚本官网；https://help.ubuntu.com/20.04/installation-guide/amd64/apbs04.html
##参考链接：https://lvii.github.io/system/2019-08-07-ipxe-auto-install-ubuntu-server-with-preseed/
##参考链接：https://www.haiyun.me/archives/1246.html
##参考链接：https://zhangguanzhang.github.io/2019/08/06/preseed/
##参考链接：http://benjr.tw/15426
## 脚本语法检查：debconf-set-selections -c preseed.cfg

# 引用其他脚本
#
# 可以以某个脚本作为中枢脚本，调用其他本地或远程seed脚本，以下是几个调用案例，供参考
# 1.preseed/include：直接调用其他脚本
#d-i preseed/include string x.cfg
#d-i preseed/include string http://x.cfg
#d-i preseed/include string tftp://x.cfg
#d-i preseed/include string ftp://x.cfg
#d-i preseed/include string nfs://x.cfg
# 2.preseed/include_command：使用shell命令逻辑判断调用seed脚本
# 说明: echo 表示使用这个脚本
# 案例一：
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi
# 案例二：
#d-i preseed/include_command string \
#   MAC=$(ip link | sed -n "/BROADCAST.*UP/{n;p}" | tr -s " " | cut -d" " -f3); \
#   HOST=$(echo ${MAC} | md5sum | cut -d" " -f1); \
#   wget http://preseed.panticz.de/${HOST}.seed -P /tmp > /dev/null; \
#   if [ $? -eq 0 ]; then echo http://preseed.panticz.de/${HOST}.seed; fi
# *3.preseed/run：直接调用shell脚本
# 思路一：根据规划好的Mac和Ip对应关系表给每台机器设置静态ip
# 思路二：seed脚本中密码统一管理
#d-i preseed/run string http://ipxe.com/public_installer/password.sh
#>#!/bin/bash
#>rootPWD="$6$y0xn3L3IaYfFs9Qn$KZMpMOwuznp4sdIe49DHRW/q5SZNXStoRFMASH9vVeyir03mLiowEN461RZ7iKdXQkJivOkYfMz11tYGArJNr/"  # sha-512
#>opsPWD="$6$U1I/krNjRD3H4pQl$aoIUYCElP5ZU6UOCqcyVvCpyERm2D1a5A0KN4kajKpEbKgOsrFvZN6eAVh8VeUqvmc/WFSbZc4AFqccw2rGO40"  # sha-512
#>grubPWD="$1$mWzi29hm$rsEYxvTvd4IKS02nQZVZb/"  # md5
#>netconsolePWD="123456"  # text
#>netconsoleKEY="https://ipxe.com/public_installer/authorized_keys"  # authorized_keys 
#>echo "d-i passwd/root-password-crypted password ${rootPWD}" > /tmp/password.cfg
#>echo "d-i passwd/user-password-crypted password ${opsPWD}" >> /tmp/password.cfg
#>echo "d-i grub-installer/password-crypted password ${grubPWD}" >> /tmp/password.cfg
#>echo "d-i network-console/password password ${netconsolePWD}" >> /tmp/password.cfg
#>echo "d-i network-console/password-again password ${netconsolePWD}" >> /tmp/password.cfg
#>#echo "d-i network-console/authorized_keys_url ${netconsoleKEY}" >> /tmp/password.cfg
#># add´s values to /var/lib/cdebconf/question.dat
#>debconf-set-selections /tmp/password.cfg


# 基础设置
#
##设置系统语言，不能选中文
d-i debian-installer/locale string en_US.UTF-8
##控制台应答设置为否
d-i console-setup/ask_detect boolean false
##以下俩个是将键盘设置为美国us
d-i keyboard-configuration/xkb-keymap select us
d-i keyboard-configuration/layoutcode string us
##世界时间设置为否
d-i clock-setup/utc boolean false
##ntp设置为是，还要加一句ntp的服务器
d-i clock-setup/ntp boolean true
#因为我的虚拟机无法dns解析，所以这里我配成阿里云时间服务器的解析ip
#d-i clock-setup/ntp-server string ntp1.aliyun.com 120.25.115.20
d-i clock-setup/ntp-server string 120.25.115.20
##设置时区为上海
d-i time/zone string Asia/Shanghai

# 网络控制台(可用来手动ssh到主机操作: ssh installer@ip )
#
# 开启控制台模块
d-i anna/choose_modules string network-console
d-i network-console/start select continue
# 使用基于密码的登录验证
d-i network-console/password password 123456
d-i network-console/password-again password 123456
# 使用基于公钥的登录验证
#d-i network-console/authorized_keys_url http://host/authorized_keys

#    _  ____________  _________  _  _______________
#   / |/ / __/_  __/ / ___/ __ \/ |/ / __/  _/ ___/
#  /    / _/  / /   / /__/ /_/ /    / _/_/ // (_ /
# /_/|_/___/ /_/    \___/\____/_/|_/_/ /___/\___/
#

# 全局设置
#
# 完全禁用网络设置，一般用在不能连接外网的本地安装中，禁用后，就不会出现网络问题、警告和长时间超时等情形
#d-i netcfg/enable boolean false
# 设置dhcp超时时间，超过60s则退出安装
d-i netcfg/dhcp_timeout string 60
d-i netcfg/dhcpv6_timeout string 60
# - auto：自动选择活动的网卡接口进行配置
# - eth0：对指定的网卡接口进行配置
d-i netcfg/choose_interface select auto
# 设置不同的链路检测超时时间（默认3秒）
d-i netcfg/link_wait_timeout string 10
# 给机器设置主机名和域名,如果dhcp服务端配置了主机名和域名，则会覆盖这里的设置；
# 同时因为这里设置了值，所以即使来自dhcp设置，也不会出现问题提示弹窗；
# 需要注意的是：如果开启了静态ip设置，则dhcp不会设置主机名和域名。
d-i netcfg/get_hostname string ubuntu1
d-i netcfg/get_domain string home.com
# 强制设置主机名是多少，而不管dhcp什么的...
#d-i netcfg/hostname string ubuntu1
# 禁用烦人的 WEP 密钥对话框.
d-i netcfg/wireless_wep string
# 一些 ISP 用作某种密码的古怪 dhcp 主机名.
#d-i netcfg/dhcp_hostname string radish
# 如果网络或其他硬件需要非免费固件，则可以将安装程序配置为始终尝试加载它，而不提示。要么更改为false以禁用询问
d-i hw-detect/load_firmware boolean true

# 静态ip设置
#
# (总开关)early_command表示在读取自动安装脚本后的第一时间就执行string后面的命令
# kill-all-dhcp; netcfg俩个命令用来重置网络，这样静态地址就可以生效了（但是在虚拟机nat网络下会出现无法找到镜像源的报错）
#d-i preseed/early_command string kill-all-dhcp; netcfg
# - true：开启静态网络配置
d-i netcfg/disable_autoconfig boolean true
# 使预配置文件在带有和不带有dhcp服务器的系统上都可以使用（配置静态ip）
d-i netcfg/dhcp_failed note
d-i netcfg/dhcp_options select Configure network manually
# IPv4 example
d-i netcfg/get_ipaddress string 192.168.2.170
d-i netcfg/get_netmask string 255.255.255.0
d-i netcfg/get_gateway string 192.168.2.1
d-i netcfg/get_nameservers string 114.114.114.114 8.8.8.8
d-i netcfg/confirm_static boolean true
# IPv6 example
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

#    __  __________  ___  ____  ___
#   /  |/  /  _/ _ \/ _ \/ __ \/ _ \
#  / /|_/ // // , _/ , _/ /_/ / , _/
# /_/  /_/___/_/|_/_/|_|\____/_/|_|
#
##基础镜像源相关配置(/etc/apt/sources.list)
d-i mirror/protocol string http
##这里在ubuntu安装中，可以使用manual自定义镜像源地址，但在Debian10.5安装中不可以使用此参数，必须指定好国家以及对应的国家源地址，如果是中国就写china 
d-i mirror/country string manual
##因为我是虚拟机nat，dns失效，所以这里直接写163源解析的ip地址
#d-i mirror/http/hostname string 59.111.0.251
d-i mirror/http/hostname string mirrors.163.com
d-i mirror/http/directory string /ubuntu
d-i mirror/http/proxy string
##另外：默认情况下，安装程序使用CC.archive.ubuntu.com，其中CC是所选国家/地区的ISO-3166-2代码。您可以在前面加上此，以便无需询问即可这样​​做。（这句直接注释不用好像没问题）
#d-i mirror/http/mirror select CC.archive.ubuntu.com

##其他镜像源配置
##您可以选择安装受限软件和全域软件，或者从 backports 存储库安装软件。
# - restricted：不完全的自由软件
# - universe：ubuntu官方不提供支持与补丁，全靠社区支持
# - backports：Backport是将一个软件的补丁应用到比此补丁所对应的版本更老的版本的行为
#d-i apt-setup/restricted boolean true
#d-i apt-setup/universe boolean true
#d-i apt-setup/backports boolean true
##如果不想使用网络镜像，请取消注释。
#d-i apt-setup/use_mirror boolean false
##选择要更新的系统服务，定义要使用的镜像源。
#d-i apt-setup/services-select multiselect security
#d-i apt-setup/security_host string mirrors.163.com
#d-i apt-setup/security_path string /ubuntu
#d-i debian-installer/allow_unauthenticated boolean true
##注意：如果不想更新任何服务，可将string后面设置为空，如下俩行设置即可（不能不设置）
d-i apt-setup/security_host string
d-i apt-setup/security_path string


#    ___  ___   ___  ________________________  _  __
#   / _ \/ _ | / _ \/_  __/  _/_  __/  _/ __ \/ |/ /
#  / ___/ __ |/ , _/ / / _/ /  / / _/ // /_/ /    /
# /_/  /_/ |_/_/|_| /_/ /___/ /_/ /___/\____/_/|_/
#
##仅对磁盘剩余空间分区，备选方案：custom，some_device，some_device_crypto，some_device_lvm
#d-i partman-auto/init_automatically_partition select biggest_free
##使用第一个磁盘
d-i partman/early_command string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
##也可以手动指定要分区的磁盘（raid的话这里可以加多块磁盘）
#d-i partman-auto/disk string /dev/sda #/dev/sdb

###<<<<<<<<<<<<<<<自动分区
###指定要使用的分区方法
### - regular: 对您的体系结构使用常规分区类型
### - lvm:     使用LVM对磁盘进行分区
### - crypto:  在加密分区中使用LVM
### - raid:    使用raid类型
#d-i partman-auto/method string regular
### 您可以选择三种预定义的分区配方之一:
### - atomic: 一个分区中的所有文件
### - home:   单独的/ home分区
### - multi:  单独的/ home，/ var和/ tmp分区
#d-i partman-auto/choose_recipe select atomic
###>>>>>>>>>>>>>>>自动分区


##<<<<<<<<<<<<<<<手动普通分区
d-i partman-auto/choose_recipe select boot-root
d-i partman-auto/method string regular
#分区中间的数字代表分区几，不能重复，且连续，否则报错；$primary{ }表示主分区；(Tips:注意\后面不能有空格)
d-i partman-auto/expert_recipe string                         \
      boot-root ::                                            \
              250 1 250 linux-efi                            \
                      $primary{ }                             \
                      method{ efi } format{ }                \
              .                                               \
	          500 2 500 ext4                                  \
                      $primary{ } $bootable{ }                \
                      method{ format } format{ }              \
                      use_filesystem{ } filesystem{ ext4 }    \
                      mountpoint{ /boot }                     \
              .                                               \
              1 4 -1 ext4                                     \
                     $primary{ } $bootable{ }                 \
                     method{ format } format{ }               \
                     use_filesystem{ } filesystem{ ext4 }     \
                     mountpoint{ / }                          \
              .                                               \
              2048 3 2048 linux-swap                          \
                      $primary{ }                             \
                      method{ swap } format{ }                \
              .
##>>>>>>>>>>>>>>>手动普通分区


###<<<<<<<<<<<<<<<手动lvm分区
#d-i partman-auto/choose_recipe select boot-lvm
#d-i partman-auto/method string lvm
###lvm分区前清理
#d-i partman-lvm/device_remove_lvm boolean true
###并确认写入lvm分区也是如此
#d-i partman-lvm/confirm boolean true
#d-i partman-lvm/confirm_nooverwrite boolean true
###对于LVM分区，您可以选择将多少卷组用于逻辑卷,例如：max、10GB、50%
#d-i partman-auto-lvm/guided_size string 100%
###设置卷组名
#d-i partman-auto-lvm/new_vg_name string vg00
#d-i partman-auto/expert_recipe string                         \
#      boot-lvm ::                                             \
#             250 1 250 linux-efi                            \
#                     $primary{ }                             \
#                     method{ efi } format{ }                \
#             .                                               \
#              500 2 500 ext4                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext4 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              1 3 -1 ext4                                     \
#                      $primary{ }                             \
#                      $defaultignore{ }                       \
#                      method{ lvm }                           \
#                      device{ /dev/sda }                      \
#                      vg_name{ vg00 }                         \
#              .                                               \
#              2048 4 2048 swap                                \
#                      $lvmok{ } lv_name{ lv_swap } in_vg{ vg00 } \
#                      method{ swap } format{ }                   \
#          .                                                      \
#              1 5 -1 ext4                                        \
#                      $lvmok{} lv_name{ lv_root } in_vg{ vg00 }  \
#                      method{ format } format{ }                 \
#                      use_filesystem{ } filesystem{ ext4 }       \
#                      mountpoint{ / }                            \
#          .                                                      
###>>>>>>>>>>>>>>>手动lvm分区


###<<<<<<<<<<<<<<<手动raid分区（暂未验证）（设置前将上面“指定要分区的磁盘”加上所有磁盘）
#d-i partman-auto/choose_recipe select multiraid												
#d-i partman-auto/method string raid
###raid分区前清理
#d-i partman-md/device_remove_md boolean true
###接下来，您需要指定将要使用的物理分区。
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .											\
#              500 10000 8884440000 raid                    \
#                      method{ raid }                       \
#              .
###最后，您需要指定RAID设置中将如何使用先前定义的分区。切记，对逻辑分区使用正确的分区号，支持RAID级别0、1、5、6和10。多个设备使用“＃”分隔。参数为：
###<raid类型> <磁盘数量> <备用数量> <文件类型> <挂载点> <磁盘#磁盘> <备用磁盘>
#d-i partman-auto-raid/recipe string \
#    1 2 0 ext4 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    1 2 0 efi -                    \
#          /dev/sda3#/dev/sdb3       \
#    .                               \
#    0 2 0 ext4 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .
###有关更多信息，请参见文件'debian-installer'包中包含的partman-auto-raid-recipe.txt文件
###>>>>>>>>>>>>>>>手动raid分区

##仅仅只是想将默认文件系统从ext3更改为其他类型，比如ext4、xfs
#d-i partman/default_filesystem string ext4
##使用uuid进行装载，这句可以不用设置，因为默认就是uuid
#d-i partman/mount_style select uuid
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true


#    ___  ___  _______ _____  _________
#   / _ \/ _ |/ ___/ //_/ _ |/ ___/ __/
#  / ___/ __ / /__/ ,< / __ / (_ / _/
# /_/  /_/ |_\___/_/|_/_/ |_\___/___/
#
##配置预配置的基本文件系统的路径。这可以用于指定安装程序检索文件系统映像的路径，该文件系统映像将部署到磁盘并用作安装的基本系统。
##NOTE：如果是全网络安装，这里就注释掉，live版安装需要指定
#d-i live-installer/net-image string http://192.168.94.1/ubuntu-installer/18.04-desktop/casper/filesystem.squashfs
##安装ubuntu桌面
##其他参数可选：standard （标准工具）ubuntu-desktop （侏儒桌面）minimal（最小化安装）
##您也可以选择不安装任何任务，并以其他方式强制安装一组软件包。我们建议始终包含 standard任务
tasksel tasksel/first multiselect ubuntu-desktop

##单独安装的附加软件包
d-i pkgsel/include string openssh-server \
    ipmitool \
	ntpdate \
	vim \
	net-tools \
	wget \
	tmux \
	whois \
	lrzsz \
	bash \
	ifupdown \
	nfs-common \
	openssl \
	isc-dhcp-client \
	libc-bin \
	openssh-client \
	rsync \
	busybox-static \
	gawk \
	dnsutils \
	open-vm-tools \
    perl 

##debootstrap之后不自动升级软件
d-i pkgsel/upgrade select none

##应用更新策略无（其他参数可选：unattended-upgrades）
d-i pkgsel/update-policy select none

##语言包选择安装
#d-i pkgsel/language-packs multiselect en, zh

## 问卷调查报告提示：不给提示
popularity-contest popularity-contest/participate boolean false

##安装额外软件包引入 postfix 依赖，配置 postfix 界面会中断 preseed 自动安装
postfix postfix/main_mailer_type select No configuration

##系统的包定位数据库将在完成大部分包的安装后更新，可能需要一段时间，视情况关闭(false)
d-i pkgsel/updatedb boolean true

#   __  _____________
#  / / / / __/ __/ _ \
# / /_/ /\ \/ _// , _/
# \____/___/___/_/|_|
#
# 创建root账户
d-i passwd/root-login boolean true
# 设置root密码，crypt(3) hash形式（建议采用SHA-512，三种方式加密）：	
# - 命令(ubuntu安装whois软件包)：mkpasswd -m sha-512
# - 命令：openssl passwd -6
# - 在线加密（百度sha512在线加密）
d-i passwd/root-password-crypted password $6$y0xn3L3IaYfFs9Qn$KZMpMOwuznp4sdIe49DHRW/q5SZNXStoRFMASH9vVeyir03mLiowEN461RZ7iKdXQkJivOkYfMz11tYGArJNr/
# 或者设置root密码，明文形式：
#d-i passwd/root-password password 123456
#d-i passwd/root-password-again password 123456

# 跳过创建普通用户（建议创建一个普通用户，防止root登录故障时使用）
#d-i passwd/make-user boolean false
# 创建普通用户
d-i passwd/user-fullname string ops User
d-i passwd/username string ops
d-i passwd/user-password-crypted password $6$U1I/krNjRD3H4pQl$aoIUYCElP5ZU6UOCqcyVvCpyERm2D1a5A0KN4kajKpEbKgOsrFvZN6eAVh8VeUqvmc/WFSbZc4AFqccw2rGO40
# 将用户添加到指定的标准初始组中
#d-i passwd/user-default-groups string audio cdrom video
#d-i passwd/user-password password 123456
#d-i passwd/user-password-again password 123456									
# 创建具有指定UID而不是默认UID的第一个用户,也就是默认新用户起始uid号
d-i passwd/user-uid string 5000
# 允许密码弱，不弹窗提示
d-i user-setup/allow-password-weak boolean true
# 不加密第一个用户的主目录
d-i user-setup/encrypt-home boolean false

#   ________  __  _____
#  / ___/ _ \/ / / / _ )
# / (_ / , _/ /_/ / _  |
# \___/_/|_|\____/____/
#
# 是否安装grub引导程序？true：不安装；false(默认)：安装
#d-i grub-installer/skip boolean true

# 如果在计算机上未检测到其他操作系统，它将使grub自动安装到MBR
d-i grub-installer/only_debian boolean true
# 如果grub-installer也找到了其他操作系统，它将使grub-installer安装到MBR ，因此它可能无法启动其他操作系统，因此安全性较低。
#d-i grub-installer/with_other_os boolean true
# 由于可能存在USB记忆棒，因此通常无法安全地确定MBR的位置，因此需要指定该位置(其他参数可选default，默认安装到第一个磁盘位置)
d-i grub-installer/bootdev string /dev/sda

# 将grub安装到指定的其他磁盘上
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev string (hd0,1)
# 将grub安装到多个磁盘:
#d-i grub-installer/bootdev string (hd0,1) (hd1,1) (hd2,1)

# 给grub菜单加密
# 只能md5，加密命令: openssl passwd -1
d-i grub-installer/password-crypted password $1$mWzi29hm$rsEYxvTvd4IKS02nQZVZb/
# 明文形式
#d-i grub-installer/password password 123456
#d-i grub-installer/password-again password 123456

# 使用以下选项为已安装的系统添加额外的引导参数（如果引导加载程序安装程序支持）
#d-i debian-installer/add-kernel-opts string net.ifnames=0 ipv6.disable=1 cgroup_enable=memory swapaccount=1

# 安装完成避免最后一条关于安装完成的消息。
d-i finish-install/reboot_in_progress note
# 防止安装程序在重新引导期间弹出CD，在某些情况下很有用
d-i cdrom-detect/eject boolean false
# 安装完成自动重启（可选参数还有关机poweroff）
d-i debian-installer/exit/reboot boolean true

#    ___  ____  __________
#   / _ \/ __ \/ __/_  __/
#  / ___/ /_/ /\ \  / /
# /_/   \____/___/ /_/
#
# 可以使用cd /target/ 或 /target/... 或 in-target 命令
d-i preseed/late_command string cd /target/;\
    sed -i 's/.*UseDNS.*/UseDNS no/' etc/ssh/sshd_config;\
	sed -i 's/(^|#)UsePAM.*/UsePAM yes/' etc/ssh/sshd_config; \
    echo 'AddressFamily inet' >> etc/ssh/sshd_config;\
	sed -i 's/^.*GSSAPIAuthentication.*/GSSAPIAuthentication no/' etc/ssh/sshd_config; \
	sed -i 's/.*PermitRootLogin.*/PermitRootLogin yes/' /target/etc/ssh/sshd_config;\
    echo 'PermitRootLogin yes' >> etc/ssh/sshd_config;\
	sed -ie 's/^GRUB_CMDLINE_LINUX=.*/GRUB_CMDLINE_LINUX="quiet net.ifnames=0 biosdevname=0 ipv6.disable=1"/' etc/default/grub; \
	in-target grub-mkconfig -o /boot/grub/grub.cfg; \
	in-target sed -i "s/dhcp6: yes/dhcp6: no/g" /etc/netplan/01-netcfg.yaml; \
    in-target sed -i "s/ens192/eth0/g" /etc/netplan/01-netcfg.yaml; \
    in-target update-grub; \
    sed -i 's/.*compatible.*/set nocompatible/g' /target/etc/vim/vimrc.tiny;\
    echo "set backspace=2" >> /target/etc/vim/vimrc.tiny; \
    echo "IPV4: \4" >> /target/etc/issue; \
    echo "IPV6: \6" >> /target/etc/issue; \
	echo 'Defaults:ops !requiretty' > /target/etc/sudoers.d/ops; \
	echo 'ops ALL=(ALL) NOPASSWD:ALL' > /target/etc/sudoers.d/ops; \
    if [ -d /target/etc/gdm3 ];then  \
    sed -i 's/.*pam_succeed_if.so.*/#auth   required   pam_succeed_if.so user != root quiet_success/' /target/etc/pam.d/gdm-password; \
    sed -i 's/.*pam_succeed_if.so.*/#auth   required   pam_succeed_if.so user != root quiet_success/' /target/etc/pam.d/gdm-autologin; \
    sed -i 's/.*AutomaticLoginEnabl.*/AutomaticLoginEnabl = true/' /target/etc/gdm3/custom.conf; \
    sed -i 's/.*AutomaticLogin.*/AutomaticLogin = root/' /target/etc/gdm3/custom.conf; \
    fi; \
	echo "@reboot root dhclient" >> etc/crontab; \
	for i in `ls etc/security/limits.d/`;do echo > etc/security/limits.d/$i;done; \
	echo "* hard memlock unlimited" >> etc/security/limits.conf; \
	echo "* soft memlock unlimited" >> etc/security/limits.conf; \
	echo "* hard nofile 1048576" >> etc/security/limits.conf; \
	echo "* soft nofile 1048576" >> etc/security/limits.conf; \
	echo "* hard nproc unlimited" >> etc/security/limits.conf; \
	echo "* soft nproc unlimited" >> etc/security/limits.conf; \
	echo "* hard stack unlimited" >> etc/security/limits.conf; \
	echo "* soft stack unlimited" >> etc/security/limits.conf; \
	echo "root hard memlock unlimited" > etc/security/limits.d/root-limits.conf; \
	echo "root soft memlock unlimited" >> etc/security/limits.d/root-limits.conf; \
	echo "root hard nofile 1048576" >> etc/security/limits.d/root-limits.conf; \
	echo "root soft nofile 1048576" >> etc/security/limits.d/root-limits.conf; \
	echo "root hard nproc unlimited" >> etc/security/limits.d/root-limits.conf; \
	echo "root soft nproc unlimited" >> etc/security/limits.d/root-limits.conf; \
	echo "root hard stack unlimited" >> etc/security/limits.d/root-limits.conf; \
	echo "root soft stack unlimited" >> etc/security/limits.d/root-limits.conf; \
	echo "vm.swappiness = 10" >> etc/sysctl.conf; \
	timedatectl set-timezone Asia/Shanghai; \
	sed -i 's/1000$/5000/'  etc/login.defs; \
	sed -i 's/^HISTSIZE=.*/HISTSIZE=100000/' etc/profile; \
	echo "USER_IP=`who -u am i 2>/dev/null | awk '{print \$NF}' | sed -r 's/[()]//g'`" >> etc/profile; \
	echo 'if [ "$USER_IP" = "" ]' >> etc/profile; \
	echo 'then' >> etc/profile; \
	echo 'USER_IP=`hostname`' >> etc/profile; \
	echo 'fi' >> etc/profile; \
	echo 'export HISTTIMEFORMAT="%F %T $USER_IP `whoami` "' >> etc/profile; \
	echo 'shopt -s histappend' >> etc/profile; \
	echo 'export PROMPT_COMMAND="history -a"' >> etc/profile; \
	echo "PS1='\\[\\e[37;1m\\][\\[\\e[31;1m\\]\\u\\[\\e[34;1m\\]@\\[\\e[32;1m\\]\\h \\[\\e[31;1m\\]\\w \\[\\e[33;1m\\]\\t\\[\\e[37;1m\\]]\\[\\e[32;1m\\]\\$ \\[\\e[m\\]'" >> /target/root/.bashrc



#                  .........              ...mm*****=m..
#               ..xm**""""""""**mmuueWWWu.um""`         `"*mu
#             um""                $$$$$$$$`                 "*u.
#           .@"                   $$$$$$$$                    `*u
#          .$`                    `*$$$$**mu..ueeu.             *x
#         .$`              ....      ``    "I$$$$$$u             $
#         !!             :W$$$$$e           $$$$$$$$             ?X
#         `$              "****""           "$$$$$$$e.      .    ~$-
#         m*U                                 """"  "*e.    TWe.  "W
#          e$x                                        `T@- u$$$$e  *:
#          ""*u.                                      e"  e$$$$$$U `$
#             "*mu..                                 :*  x$$$$$$$$  "x
#                """*mme....                         !! u$$$$$$$$$!  $
#                      ``""""**m..                   $`:$$$$$$$$$$!  $!
#                               "*@.              ...$ U$$$$$$$$$$!  $~
#                                  W        ..um****** *$$$$$$$$$$!  $
#                                  $Weeu..x@""`     !!  $$$$$$$$$*  xT
#                                  $**$$$$$!        `*u `*$$$$$$*  :$
#                        ...m*u..e"?xmx`"*$!          "*x. """""  u@"
#                     ...$""W `$"U=" .@m: !!            `"***mmm=""
#                    -$``*  " :S.$   `-"?:U!
#                     $u      ~$""    .u` $!
#                    .$"*W.    "@.m***""  ~$
#                    "u  `"e.   `"         *
#                   .m"*m**""e       .m    ~U
#                 .e"        "@. ..m*"      $:
#                 X"           "@""         ~$
#                :*                         .$
#         eem**. !!                         W!
#         $`   "*W!                        u$!
#         $      ?!                       x$$
#         $      !X                      .$$$
#         $       $                      `*$~
#         $       `@.                     x?
#         $         `                    .$
#         $                             .@*@u
#         $                            x*W  *u
#         $      e.                  .u" "W  "@u
#         *:     "*u.            ..m*"`   "W   "@.
#     ...m****mmmmmW$e.....   .u@T"        "mu.m@**
#   u*""`          ````""""***"` "m.         ``
# :$"  x*` ..                      "*m.
# !$  u"  .$                          $
# `**********************************""


#                                  .,cccchhhhccc,?""?L
#                                 ,cb$$$$$$$$$$$$$$$$$$$c,
#                              ,r="3$$$$$$$?$$?$$$$$$$$$$$$c           ,,cccc
#                             ,$,d$$$$$$$$$c ?c`?$$$$$$$$$$$$$ ,,ccc$$P"',nn,"
#                            ,$$$$$$$$$$$$$$$,$h`$$$$$$$$$$$$$$$$$$",nMMMMMMMn
#                            $$$??$$$$$$??$$$$$$$$$$$$$$$$$$$$$$$",nMMMMMMMMMM
#                            ?$'nn`$$$F,nn ?$$$$$$$$$$$$$$$$$$$P'nMMMMMMMMMMM'
#                            `F.MM,?$$ MMML`$$$$$$$$$$$$$$$$$$$.MMMMMMMMMMMMM
#                             $:P  J$F{M"  ,$$$$$$$$$$$$$$$$$$$.".,nMMMMMMMP'
#                             $_`_ ""F `   J$$$$$$$$$$$$$$$$$$F.MndMMMMMMMP'
#                           ,'    ``"4,,,c$$$$$$$$$$$$$$$$$$$$$.TMMMMMMMMf'
#                          ;$,       ,$$$$$$$$$$$$$$$$$$$$$$F "?bc,,""""'
#                          ?$C`3cccc$$$xc `???$$$$$$$$$$$""
#                            ""\,"?$$$P",d$$ccc$$$$$$$$$F
#                                "?ccccd$$$$$$$$$$$$$P""
#                                  `?$$$$$$$$$c
#                                   `$$$$$$$$$'
#                                    $$$$$$,cc,
#                                   J??$$$P$$$$
#                              ,r, ,",cc,"P'$$$$
#                             4$ F,F,$$$$bcc,"?$                          ,,ccc
#                            zF-  F $$L4,"?$$$$E                      _,d$$$$$$
#                           ,?d "JF d"F'$$c`?$$"4c,.               _,d$$$$$$$$'
#                               4$$c...J$$$$$eed$$$$$c,      _,ccd$$$$$$$$$$F
#                               J$$$$$$$$$$$$$$$$$$$$$$$,`?$$$$$$$$$$$$$$$P"
#                               $$$$$$$$$$$$$$$$$$$$$$$$$$ $$$$$$$$$$$$$P"
#                               `$$$$$$$$$$$$$$$$$$$$$$$$$,)$$$$$$$$$$$"
#                                ?$$$$$$$$$$$$$$$$$$$$$$$$>)$$$$$$$$$F
#                                 `$$$$$ $$$$$$$$$$$$$$$$$ $$$$$$$P"
#     ,cc=                       ,$c,"?F,$$$$$$$$$$$$$$$$'J$$$$P"
#   ,$$",$$$$$$$bc.              $$$$$P $$$$$$$$$$$$$$$F',$PF"
#  {$$"c$$$$$$",,zcchhc,         $$$$$ d$$$$$$$$$$$$$$  "'
#   ?b{$$$$$ ,$",ccccc,$$$bc,    `$$$$ $$$$$$$$$$$$$P'
#      `""?" ",J$$$$$$$$$$$$$$cc  ?$$$ ?$$$$$$$$$$$"
#             ?$$$$$$$$$$$$$$$$$$c,"$$b`?$$$$$$$$P'
#               `""????$$$$$$$$$$$$b,"?b`?$$$$$$$'
#                        `""??$$$$$$$$c`?`?$$$$"
#                               `"?$$$$$ec.$$$$
#                                   `"?$$$$$$$$L
#                                       `"??$$$F


#                     _ooOoo_
#                    o8888888o
#                    88" . "88
#                    (| -_- |)
#                    O\  =  /O
#                 ____/`---'\____
#               .'  \\|     |//  `.
#              /  \\|||  :  |||//  \
#             /  _||||| -:- |||||-  \
#             |   | \\\  -  /// |   |
#             | \_|  ''\---/''  |   |
#             \  .-\__  `-`  ___/-. /
#           ___`. .'  /--.--\  `. . __
#        ."" '<  `.___\_<|>_/___.'  >'"".
#       | | :  `- \`.;`\ _ /`;.`/ - ` : | |
#       \  \ `-.   \_ __\ /__ _/   .-` /  /
#  ======`-.____`-.___\_____/___.-`____.-'======
#                     `=---='
#  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#           佛祖保佑       永无BUG



#  ░░░░░░░░░░░░░░░░░░░░░░░░▄░░
#  ░░░░░░░░░▐█░░░░░░░░░░░▄▀▒▌░
#  ░░░░░░░░▐▀▒█░░░░░░░░▄▀▒▒▒▐▒
#  ░░░░░░░▐▄▀▒▒▀▀▀▀▄▄▄▀▒▒▒▒▒▐▒
#  ░░░░░▄▄▀▒░▒▒▒▒▒▒▒▒▒█▒▒▄█▒▐▒
#  ░░░▄▀▒▒▒░░░▒▒▒░░░▒▒▒▀██▀▒▌▒
#  ░░▐▒▒▒▄▄▒▒▒▒░░░▒▒▒▒▒▒▒▀▄▒▒▒
#  ░░▌░░▌█▀▒▒▒▒▒▄▀█▄▒▒▒▒▒▒▒█▒▐
#  ░▐░░░▒▒▒▒▒▒▒▒▌██▀▒▒░░░▒▒▒▀▄
#  ░▌░▒▄██▄▒▒▒▒▒▒▒▒▒░░░░░░▒▒▒▒
#  ▀▒▀▐▄█▄█▌▄░▀▒▒░░░░░░░░░░▒▒▒
#  单身狗就这样默默地看着你，一句话也不说



# ┌───┐   ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┬───┐ ┌───┬───┬───┐
# │Esc│   │ F1│ F2│ F3│ F4│ │ F5│ F6│ F7│ F8│ │ F9│F10│F11│F12│ │P/S│S L│P/B│  ┌┐    ┌┐    ┌┐
# └───┘   └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┴───┘ └───┴───┴───┘  └┘    └┘    └┘
# ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───┬───────┐ ┌───┬───┬───┐ ┌───┬───┬───┬───┐
# │~ `│! 1│@ 2│# 3│$ 4│% 5│^ 6│& 7│* 8│( 9│) 0│_ -│+ =│ BacSp │ │Ins│Hom│PUp│ │N L│ / │ * │ - │
# ├───┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─────┤ ├───┼───┼───┤ ├───┼───┼───┼───┤
# │ Tab │ Q │ W │ E │ R │ T │ Y │ U │ I │ O │ P │{ [│} ]│ | \ │ │Del│End│PDn│ │ 7 │ 8 │ 9 │   │
# ├─────┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴┬──┴─────┤ └───┴───┴───┘ ├───┼───┼───┤ + │
# │ Caps │ A │ S │ D │ F │ G │ H │ J │ K │ L │: ;│" '│ Enter  │               │ 4 │ 5 │ 6 │   │
# ├──────┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴─┬─┴────────┤     ┌───┐     ├───┼───┼───┼───┤
# │ Shift  │ Z │ X │ C │ V │ B │ N │ M │< ,│> .│? /│  Shift   │     │ ↑ │     │ 1 │ 2 │ 3 │   │
# ├─────┬──┴─┬─┴──┬┴───┴───┴───┴───┴───┴──┬┴───┼───┴┬────┬────┤ ┌───┼───┼───┐ ├───┴───┼───┤ E││
# │ Ctrl│    │Alt │         Space         │ Alt│    │    │Ctrl│ │ ← │ ↓ │ → │ │   0   │ . │←─┘│
# └─────┴────┴────┴───────────────────────┴────┴────┴────┴────┘ └───┴───┴───┘ └───────┴───┴───┘

# MacBook Pro
#      _________________________________________________________________
#   /    _____________________________________________________________    \
#   |   |                                                             |   |
#   |   |  >_                             .                           |   |
#   |   |                                . *                          |   |
#   |   |                                "  ..                        |   |
#   |   |                          .=*&æ..="""*.                      |   |
#   |   |                        .     ""        *                    |   |
#   |   |                       &               *                     |   |
#   |   |                       &c               .                    |   |
#   |   |                       *e                *                   |   |
#   |   |                        "&b            .                     |   |
#   |   |                           &æ     .  .                       |   |
#   |   |                             &ææ""æ=                         |   |
#   |   |                                   "                         |   |
#   |   |                      ______  ______  ______                 |   |
#   |   |                     |______||_____/ |      |                |   |
#   |   |                     |       |     \ |______|                |   |
#   |   |                                                             |   |
#   |   |_____________________________________________________________|   |
#    \____________________________________________________________________/
#                    \_______________________________________/
#                 .---------------------------------------------.
#              _-'.... .-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.  ....`-_
#           _-'..... .---.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.--.  .....`-_
#        _-'....... .---.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-`__`. .......`-_
#     _-'......... .-----.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-----. .........`-_
#  _-'........... .---.-. .-----------------------------. .-.---. ...........`-_
# :-----------------------------------------------------------------------------:
# `-----------------------------------------------------------------------------'

#                                       ...,,,,,...
#                        :        ..eed$$$$$$$$$$$$$bee..
#                    .   U    ued$$$$$$$$$$$$$$$$$$$$$$$$eu
#                    `~m.$  u$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$e.
#                ..     "$.d$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$u
#                ""#=q.  $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$u
#                   .d8u.$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$u
#                 .e$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$e.
#               u$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$u
#             .d$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$e
#            u$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$I?$b
#           u$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ $$b
#          :$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$b`$$U
#          $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$:`$$
#         !$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ "$:
#         $$$$$$$$$$$$$$$$$$$$$$u"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$: $!
#         $$$$$$$$$$$$$$$$$$$$$$$u "?$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$U !!
#        !$$$$$$$$$$$$$$$$$$$$$$$$$:. "??$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ `~
#        `$$$$$$$$$$$$$$$$$$$$$$$$$;T$eu.`""???$$$$$$$$$$$$$$$$$$$$$$$$$$
#         $$$$$$$$$$$$$$$$$$$$$$$$$t;$$$$$beeu..`""'..,,,..`""??$$$$$$$$$
#         ?$$$$$$$$$$$$$$$$*$$$$$$$F;$$$$$$$"".,,CI$$$$$$$$$$$Wu`"?$$$$$$;
#         `$$$$$$$$$$$$$$$T!$$$$$$$`!$$$$$'.ud$$$$$$$$$$$$$$$$$$e. "?$$$$
#          ?$$$$$$$$$$$$$$!!$$$$$$$ U$$$$'u$$$$$$$$$$$$$$$$$$$"I$*:  "$$$
#           $$$$$$$$$$$$$f``$$$$$$':$$$$$e$$$$$$F"?$$$$$$$$$*(m"(ueu  "?T
#           `$$$$$$$$$$$"   "$$$$f.$$$$$$$$$$F"  ,$$$$$$$$$"u"  !$$T
#            `$$$$$$$$$f ee. "$$$ $$$$$$$$$$"    d$$$$$$$$f.F   W$$
#              "$$$$$$$` $$$ee."'u$$$$$$$$$$    u$$$$$$$$$ 4b.u$$$$
#               "$$$$$$  ?$$$$$u.$$$$$$$$$$$u..e$$$$$$$$$$."$$$$$$$u
#                 ?$$$$U `$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$W$$$$$$$$.
#                  "?$$$u "?$$$$?$$$$$$$$$$$$$$$$$$$$$$$$$$$T"$$$$$$W
#                    "$"$Wu.""??i~$$$$$$$$$$$$$$$$$$$$**$$$*`u$$$$$$T
#                       *$$$WWu .:"$$$$$$$$$$$$$**$$$WWW$*?.e$$$$$$$`
#                       `$$$$$$ ($ "$$$$$$$$$$* -@$$$$$$$$$$$*I$$$F'
#                        $$$$$*  $W."$$$$$$$$$UW$e `""""""?CuW$$$F
#                       :$**"`   $$$u "$$$$$$$$$$$W."Wu   $$$$$$"
#                        `      -$$$$W."?$$$$$$$$$$$eC?(.u$$$$"
#                             . :$$$$$$e.`"$$$$$$$$$****"I$$F`
#                           :!! !$$$$$$$$e. "??$$$$$WeeW$$F"
#                         :!!!' W$$$$$$$$$$$eu. `"""****"`
#                         !!;'  $$$$$$$$$$$$$$$u   ....:::
#                        !!!:  :$$$$$$$$$$$$$$$$$:  !!!!!!!.
#                        !!!!!:. ""?$$$$$$$$$$$$$W  !!!!!!!!:
#                        !!!!!!!!!:. "?$$$$$$$$$$$u `!!!!!!!!!
#                        !!!!!!!!!!!!:. "?$$$$$$$$$e.` !!!~~!!.
#                     .:. `!!!!!!!!!!!!!:."?$$$$$$$$$$u !`.. `!
#                  :!!!!!:  `!!!!!!!!!!!!!!: "?$$$$$$$$ ~ !!: `
#               :!!!:.`'!!!:  `!!!!!!!!!!!!!!:."?$$$$$$   !!!!
#            ::!!!!!!!! `!!!!:  `!!!!!!!!!'  !!: "$$$$f  !!!!!!.
#         .:!!!!!!!!!!!. `!!!!!:  `!!!!!!  :!!!!: T$$$` !!!!! !!:
#       :!!!!!!!!!!!!!!!  `!!!!!!.  !!!!' .!!!!!!  ?$$  !!!!!: !!!
#     :!!!!!!!!!!!!!!!!!!  !!!!!!!!. `!!  !!!!!!!! `$T  !!!!!!  !!!:
#   :!!!!!!!!!!!!!!!!!!!!  !!!!!!!!!: `!  !!!!!!!!: "!  !!!!!!! `!!!!:
#  !!!!!!!!!!!!!!!!!!!!!!. (!!!!!!!!!!:  !!!!!!!!!!. ~ <!!!!!!!. `!!!!!.


#                             .xm*f""??T?@hc.
#                           z@"` '~((!!!!!!!?*m.
#                         z$$$K   ~~(/!!!!!!!!!Mh
#                       .f` "#$k'`~~\!!!!!!!!!!!MMc
#                      :"     f*! ~:~(!!!!!!!!!!XHMk
#                      f      " %n:~(!!!!!!!!!!!HMMM.
#                     d          X~!~(!!!!!!!X!X!SMMR
#                     M :   x::  :~~!>!!!!!!MNWXMMM@R
#  n                  E ' *  ueeeeiu(!!XUWWWWWXMRHMMM>                :.
#  E%                 E  8 .$$$$$$$$K!!$$$$$$$$&M$RMM>               :"5
# z  %                3  $ 4$$$$$$$$!~!*$$$$$$$$!$MM$               :" `
# K   ":              ?> # '#$$$$$#~!!!!TR$$$$$R?@MME              z   R
# ?     %.             5     ^"""~~~:XW!!!!T?T!XSMMM~            :^    J
#  ".    ^s             ?.       ~~d$X$NX!!!!!!M!MM             f     :~
#   '+.    #L            *c:.    .~"?!??!!!!!XX@M@~           z"    .*
#     '+     %L           #c`"!+~~~!/!!!!!!@*TM8M           z"    .~
#       ":    '%.         'C*X  .!~!~!!!!!X!!!@RF         .#     +
#         ":    ^%.        9-MX!X!!X~H!!M!N!X$MM        .#`    +"
#           #:    "n       'L'!~M~)H!M!XX!$!XMXF      .+`   .z"
#             #:    ":      R *H$@@$H$*@$@$@$%M~     z`    +"
#               %:   `*L    'k' M!~M~X!!$!@H!tF    z"    z"
#                 *:   ^*L   "k ~~~!~!!!!!M!X*   z*   .+"
#                   "s   ^*L  '%:.~~~:!!!!XH"  z#   .*"
#                     #s   ^%L  ^"#4@UU@##"  z#   .*"
#                       #s   ^%L           z#   .r"
#                         #s   ^%.       u#   .r"
#                           #i   '%.   u#   .@"
#                             #s   ^%u#   .@"
#                               #s x#   .*"
#                                x#`  .@%.
#                              x#`  .d"  "%.
#                            xf~  .r" #s   "%.
#                      u   x*`  .r"     #s   "%.  x.
#                      %Mu*`  x*"         #m.  "%zX"
#                      :R(h x*              "h..*dN.
#                    u@NM5e#>                 7?dMRMh.
#                  z$@M@$#"#"                 *""*@MM$hL
#                u@@MM8*                          "*$M@Mh.
#              z$RRM8F"                             "N8@M$bL
#             5`RM$#                                  'R88f)R
#             'h.$"                                     #$x*

#                           :                      :M
#                          XMX                   .HMM>
#                          MMMM.                dMMMM>
#                         'MMMMMX     .....   dMMMMMMX
#                         XMMMMMMMnMMMMMMMMMMMMMMMMMMM
#                        :MMMMMMMMMMMMMMMMMMMMMMMMMMMM>
#                        XMMMMM!"    "MMMMMM"`  `"MMMMM
#                        MMMM#         4MMf        `MMMX
#                       XMMM            MX          'MMM:
#                      'MMM~            '>            MMM
#                      MMMf       .     '>            `MMX
#                     MMMM>     :MMM    '>   :MMM      MMMX
#                    XMMMM      MMMM>   '>   XMMMX     MMMMk
#                   MMMMMM>     MMMM~   'k   MMMMX     MMMMMh
#                  MMMMMMMX     XMMM    XX   ?MMM     XMMMMMMM
#                  MMMMMMMMk     ^`    X 'h    `     :MM##MMM~
#                   ?MM>  ^?M.       .!    %.      .HM"   MM
#                  .?M      '"%+++!".nMMMMn "%++!*" %.. 'M..
#                   `?M>+%L         <MMMMMMMM>       :   XM"
#                     'X   %        XMMMMMMMM>      X   'f
#                       X   `M.      ?MMMMMM~    .HM   :`
#                        %.  `MMMx.          .xHMMM   X
#                   ..    `X  `MMMMMMMMMMMMMMMMMMM  :f
#                 :MMMMMMMh:.M. 4MM     "     MM" xMMMMMMMMMMh.
#               :MMMMMMMMMMMMMMM: `%x.......x"`.HMMMMMMMMMMMMMM
#             .MMMMMMMMMMMMMMMMMMMMhx.......xHMMMMMMMMMMMMMMMMM
#     .nHMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM`MMMMMMMMMMMMMMMMX
#   :MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMdMMMMMMMMMMMMMMMMMMMM
#  MMMMMMMMMMMMMMMMMMMM"``""MMMMMMMMMMMM!MMMMMMMMMMMMMMMMMMMM~
# MMMMMMMMMMMMMMMMMMM!     XMMMMMMMMMMMf:HMMMMMMMMMMMMMMMMM!
# M?MMMMMMMMMMMMMMMM`    :MMMMMMMMMMMM!MMMMMMMMMMMMMMMMMMM~
# :MMMMMMMMMMMMMMMMX     MMMMMMMMMMMMXXMMMMMMMMMMMMMMMMM`
# MMMMMMMMMMMMMMMMMX    'MMMMMMMMMMMMM!MMMMMMMMMMMMMMMMX
# MMMMMMMMMMMMMMMMM~    'MMMMMMMMMMMMMM?MMMMMMMMMMMMMMM~
#  #M)MMMMMMMM!MMM       MMMMMMMMMMMMMMMM/MMMMMMMMMMMM~
#    ?MMMMMM"-"2MMMMMx   XMMMMMMMMMMMMMMMMX?**!:MMM"`
#      ^""    XMMMMMMMM  'MMMMMMMMMMM"`MMMMMMMMMMM>
#            XMMMMMMMMML  MMMMMMMMMX .MMMMMMMMMMMf
#            XMMMMMMMMMML 4MMMMMMMMMXMMMMMMMMMMM~
#           XMMMMMMMMMMMMXMMMMMMMMMMXMMMMMMMMMx.
#             MMMMMMMMMMMMM!MMMMMMMMMMLMMMMMMMMMMMMx
#              #MMMMMMMMMMMMMMMMMMMMMMM!MMMMMMMMMMMMM
#               `MMMMMMMMMMMLMMMMMMMMMMM/MMMMMMMMMMMM>
#                  `*MMMMM!nMMMMMHh(?*MMM?MMMMMMMMMMM>
#                        XMMMMMMMMMMMMMMMX4MMMMMMMMMM
#                       XM#     `*MMMMMMMMXMMMMMMMM"
#                      'M          `MMMMMMMX^"*""
#                      Xf            !?MMMMMM
#                      'X             X ?MMMMM
#                       !             `> `MMMMX
#                        #:     4     X>  'MMMM>
#                         `L     "x.xM~    `MMMX
#                           %.    f         MMMX
#                            `#M``         :MMM~
#                               `Mx.      dMMM~
#                                  ``"**MM*"	